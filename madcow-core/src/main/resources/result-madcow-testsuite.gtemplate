<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"><!--<![endif]-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Madcow Test Suite Report</title>

    <link rel="shortcut icon" type="image/x-icon" href="./.assets/img/4impact.ico"/>
    <link rel="icon" type="image/x-icon" href="./.assets/img/4impact.ico"/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="layout" content="main"/>

    <link href="./.assets/bootstrap/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="./.assets/madcow.css" rel="stylesheet"/>
    <link href="./.assets/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet"/>

</head>
<body>
    <div class="container">

        <div class="row">
            <div class="page-header">
                <h1>Madcow Test Suite Report</h1>
            </div>
        </div>

        <div class="row">
            <% if (passedCount > 0) { %>
            <div class="progress progress-success" style="margin-bottom: 9px;">
                <div class="bar" style="width: ${passedCount / (passedCount + failedCount) * 100}%">${passedCount} passed</div>
            </div>
            <% } %>
            <% if (failedCount > 0) { %>
            <div align="right" class="progress progress-danger" style="margin-bottom: 9px;">
                <div class="bar" style="width: ${failedCount / (passedCount + failedCount) * 100}%">${failedCount} failed</div>
            </div>
            <% } %>
        </div>

        <div class="row well">
            <div class="span3 centralise">
                <h3>Tests<br/>${passedCount + failedCount}</h3>
            </div>

            <div class="span5 centralise">
                <h3>Passed<br/>${(passedCount / (passedCount + failedCount) * 100).round(new java.math.MathContext(2)).intValue()}%</h3>
            </div>

            <div class="span3 centralise">
                <h3>Time<br/>${totalTime}</h3>
            </div>

        </div>

        <div class="row">
            <hr/>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Status</th>
                        <th>Test Case</th>
                        <th class="centralise">Steps</th>
                        <th class="centralise">Time</th>
                    </tr>
                </thead>
                <tbody>
                    <%
                    def lastSuite = null;
                    testSuite.getTestCasesRecusively().each{ testCase ->

                        if (lastSuite != testCase.testSuite) {
                            lastSuite = testCase.testSuite;
                            %>
                    <tr>
                        <td class="btn-info">&nbsp;</td>
                        <td colspan="3" class="btn-info"><strong>${lastSuite.toString()}</strong></td>
                    </tr>
                            <%
                        }
                    %>
                    <tr>
                        <% if (testCase.lastExecutedStep.result.failed()) { %>
                        <td><a class="btn btn-danger linkless"><i class="icon-remove icon-white"></i></a></td>
                        <% } else { %>
                        <td><a class="btn btn-success linkless"><i class="icon-ok icon-white"></i></a></td>
                        <% } %>
                        <td><a href="${testCase.name}/index.html">${testCase.name}</a></td>
                        <td class="centralise">${testCase.lastExecutedStep.result.parseError() ? '-' : testCase.steps.size()}</td>
                        <td class="centralise">${testCase.lastExecutedStep.result.parseError() ? '-' : testCase.getTotalTimeInSeconds() + 's'}</td>
                    </tr>
                    <% } %>
                </tbody>
            </table>
        </div>

        <div class="row">
            <hr/>
            <footer class="footer">
                <p class="pull-right"><a href="#">Back to top</a></p>
                <p>Created using <a href="http://madcow.4impact.net.au">4impact Madcow</a> on ${new Date().format('dd-MM-yyyy HH:mm')}</p>
            </footer>
        </div>
    </div>

    <script src="./.assets/jquery-1.7.2.min.js" type="text/javascript" ></script>
    <script src="./.assets/bootstrap/js/bootstrap.min.js" type="text/javascript" ></script>
</body>
</html>