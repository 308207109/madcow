<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"><!--<![endif]-->
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>$testName</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="layout" content="main"/>

        <link href="../.assets/bootstrap/css/bootstrap.css" rel="stylesheet"/>
        <link href="../.assets/madcow.css" rel="stylesheet"/>
        <link href="../.assets/bootstrap/css/bootstrap-responsive.css" rel="stylesheet"/>

    </head>
    <body>
        <div class="container">

            <div class="row">
                <div class="page-header">
                    <h1>Results for $testName</h1>
                </div>
                <a class="btn btn-small btn-primary" href="../index.html">Back to Suite Report</a>
                <br/><br/>
            </div>

            <% if (isParseError) { %>
            <div class="row">
                <div class="alert alert-error">
                    <h4 class="alert-heading">Test Parse Error!</h4>
                    <br/>
                    ${lastExecutedStep.result.message ?: ''}
                </div>
            </div>

            <% } else { %>

            <% if (isFailure) { %>
            <div class="row">
                <div class="alert alert-error">
                    <h4 class="alert-heading">Test Failed!</h4>
                    <br/>
                    <a href="#failure" class="btn btn-danger"><i class="icon-share-alt icon-white"></i> Go to failing step</a>
                </div>
            </div>
            <% } %>

            <div class="row">
                <blockquote>
                    <table>
                        <tbody>
                            <tr>
                                <td><p>Steps:</p></td>
                                <td><p>&nbsp;</p></td>
                                <td><p>$totalSteps</p></td>
                            </tr>
                            <tr>
                                <td><p>Time:</p></td>
                                <td><p>&nbsp;</p></td>
                                <td><p>$totalTime</p></td>
                            </tr>
                            <% if (testCase.testSuite.toString() != '') { %>
                            <tr>
                                <td><p>Suite:</p></td>
                                <td><p>&nbsp;</p></td>
                                <td><p>${testCase.testSuite.toString()}</p></td>
                            </tr>
                            <% } %>
                        </tbody>
                    </table>
                </blockquote>
            </div>

            <div class="row">
                <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Status</th>
                                <th>Grass</th>
                                <th>Details</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% steps.eachWithIndex { step, idx ->
                                if (step.result.failed()) {
                                    %><a name="failure"/><%
                                }
                            %>
                            <tr>
                                <td>${idx + 1}</td>
                                <%
                                String resultFileLink = '';
                                if (step.result.hasResultFile) {

                                    resultFileLink = "&nbsp; <a class=\"btn btn-info\" href=\"${step.getSequenceNumberString() + '.html'}\"><i class=\"icon-camera icon-white\"></i></a>"
                                }
                                %>

                                <% if (step.result.failed()) {
                                %>
                                <td><a class="btn btn-danger linkless"><i class="icon-remove icon-white"></i></a>${resultFileLink}</td>
                                <% } else { %>
                                <td><a class="btn btn-success linkless"><i class="icon-ok icon-white"></i></a>${resultFileLink}</td>
                                <% } %>
                                <td>${step.blade.line}</td>
                                <td><% if (step.blade.line != step.blade.toString()) { %>
                                    <h6>${step.blade.toString()}</h6>
                                    <% }
                                    if ((step.result.message ?: '') != '') {
                                        %>${step.result.message} <%
                                    }
                                    %>
                                </td>
                            </tr>
                            <% } %>
                        </tbody>
                </table>
            </div>
            <% } %>
        </div>
        <script src="../.assets/jquery-1.7.2.min.js" type="text/javascript" ></script>
    </body>
</html>